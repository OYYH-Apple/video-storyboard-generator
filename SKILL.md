---
name: video-storyboard-generator
description: 视频分镜脚本生成器，支持头脑风暴、用户偏好记忆、15秒镜头规则、角色提示词生成、音效/BGM建议。用于生成带运镜指导、画面设计、旁白、角色描述的完整分镜脚本。支持极简版（内容描述）和专业版（详细运镜）。适用：教程、书籍介绍、评论、剧情、产品介绍、数据报告。当用户说"做分镜"、"分镜脚本"、"视频分镜"时使用。
---

# Video Storyboard Generator

通过头脑风暴与用户共同确定视频需求，基于用户画像提供个性化建议，生成结构化的视频分镜脚本。

## 快速导航

> 📋 **新手推荐**: 查看 [`references/quick-reference.md`](references/quick-reference.md) 获取一页纸速查表

### 工作流程
- [阶段0: 用户画像加载（可选）](#阶段0用户画像加载可选)
- [阶段1: 视频类型识别与头脑风暴](#阶段1视频类型识别与头脑风暴)
- [阶段2: 段落结构设计](#阶段2段落结构设计)
- [阶段3: 镜头拆分](#阶段3镜头拆分时长时间规则)
- [阶段4: 逻辑检查](#阶段4逻辑检查与流畅度评估)
- [阶段5: 生成分镜脚本](#阶段5生成分镜脚本)
- [阶段6: 文件保存](#阶段6文件保存)
- [阶段7: 更新用户画像](#阶段7更新用户画像)

### 技术参考
- [运镜类型参考](#运镜类型参考) - 基础运镜 vs 电影级运镜
- [画面布局参考](#画面布局参考) - 构图法则与景别系统
- [参考资产](#参考资产) - 所有reference文件索引

## 核心原则

**段落是主题驱动的，不是标准化的**：分镜的段落结构完全取决于视频主题和内容需求。

**需求需要共同探索**：用户可能对视频的具体表现形式不够清晰，需要通过头脑风暴一起确定。

**用户画像驱动个性化**：系统会记忆用户的偏好，在后续交互中提供更贴合用户喜好的建议。

**镜头时长规则**：默认单个镜头时长不得超过15秒（可自定义）。

**内容安全规范**：所有分镜内容必须符合安全标准，不包含暴力、血腥或不适描述。详见 `references/content-safety.md`。

## 工作流程

### 阶段0：用户画像加载（可选）

在开始任何交互前，检查用户画像文件是否存在：
- **Windows**: `C:\Users\[用户名]\.video-storyboard\user-profile.md`
- **macOS/Linux**: `~/.video-storyboard/user-profile.md`
- **统一表示**: `<用户主目录>/.video-storyboard/user-profile.md`

**如果画像文件存在：**
读取用户画像后，**必须询问用户**：
> "检测到您之前的使用偏好记录。是否使用之前的偏好设置？"
> - **是**：应用用户画像中的偏好设置作为推荐
> - **否**：忽略画像记录，使用默认设置

**如果画像文件不存在：**
使用默认设置，并在本次交互结束后询问是否保存偏好。

详见 `references/user-profile.md`。

---

### 阶段1：视频类型识别与头脑风暴

#### 识别视频类型

根据用户描述识别视频类型，详见 `references/video-types.md`。

#### 头脑风暴 - 需求澄清

根据视频类型进行针对性的头脑风暴，详见 `references/questions-by-type.md`。

**所有视频类型都需要确认：**
5. **镜头时长限制** - 单个镜头最长时长（根据视频总时长自动推荐）
   - **短视频（≤60秒）**：建议单镜头≤12秒，按镜头数量规划
     - 30秒视频 → 建议3-5个镜头
     - 45秒视频 → 建议4-6个镜头
     - 60秒视频 → 建议5-8个镜头
     - 开场镜头建议3-5秒，核心镜头8-12秒
   - **标准视频（>60秒）**：默认15秒上限，可自定义
     - 15秒以下：保持紧凑节奏
     - 15-20秒：适合需要更多信息密度的场景
     - 20秒以上：仅在特殊叙事需求时使用

6. **分镜版式** - 需要极简版（仅内容描述）还是专业版（详细运镜指导）？
   - **极简版**：仅列出每个分镜的画面内容和旁白
   - **专业版**：包含运镜、布局、视觉元素、过渡等详细信息

7. **音效/BGM** - 需要音效和BGM建议吗？
   - 音效：环境音、转场音效、强调音效
   - BGM：背景音乐类型和节奏

8. **旁白/台词呈现方式** - 如何展示旁白和角色台词？
    - 仅旁白：只有解说旁白
    - 仅台词：只有角色对话
    - 旁白+台词：两者都有，确保内容一致
    - 合并展示：旁白和台词合并为单一文本块
    - **重要：每个镜头必须有对应的旁白/台词，放在该镜头后面。如果某个镜头没有，标注"无"**

9. **OpenCode提示词** - 需要生成可在OpenCode中使用的执行提示词吗？（仅专业版）
    - 是：生成可直接复制到OpenCode的技术实现提示词
    - 否：跳过，仅输出分镜文档

10. **Seedance 2.0 提示词** - 需要生成可用于Seedance 2.0 AI视频生成工具的提示词吗？
    - **是**：为每个镜头生成符合Seedance 2.0格式的提示词，包含：
      - [主体描述]：角色/物体外观详细描述
      - [场景与氛围]：环境、光线、色调、风格
      - [动作与情节]：按时间顺序描述动作流程
      - [台词与旁白]：精确写出台词/旁白内容、语气、语速
      - [镜头语言]：镜头运动和剪辑方式
      - [音画同步/音频]：音效、BGM、同步要求
      - [其他控制]：时长、分辨率、质量要求
    - **否**：跳过Seedance提示词生成
    
    详见 `docs/Seedance2.0提示词模板.md`

**故事类、剧情类、电影类视频额外确认：**
11. **角色设定** - 主要角色有哪些？
    - 角色数量和定位
    - 角色外貌特征
    - 角色性格特点
    - 是否需要角色提示词（用于AI生成角色形象）

12. **角色提示词比例** - AI生图比例（默认9:16）
    - 9:16（纵向，适合短视频）
    - 16:9（横向，适合长视频）
    - 1:1（方形）
    - 21:9（电影宽屏）
    - 自定义比例

详见 `references/character-prompts.md`。

12. **场景设定** - 主要场景有哪些？
   - 室内/室外
   - 时间（白天/黑夜/傍晚）
   - 氛围/情绪

#### 视觉风格选择

根据视频类型和用户画像推荐风格，详见 `references/visual-styles.md`。优先推荐用户画像中记录的偏好风格。

---

### 阶段2：段落结构设计

根据视频类型和头脑风暴结果，设计段落结构。详见 `references/story-patterns.md`。

**设计原则：**
- 段落数量根据时长和内容复杂度决定（通常3-10个段落）
- 每个段落服务于一个清晰的叙事目标
- 段落间有逻辑递进关系

---

### 阶段3：镜头拆分（时长规则）

**核心规则：单个镜头时长不得超过用户设定的上限（默认15秒）**

超过上限的镜头必须拆分为多个子镜头，确保视觉节奏紧凑、镜头间有明确的运镜变化。

拆分策略详见 `references/shot-duration.md`。

---

### 阶段4：逻辑检查与流畅度评估

**在生成分镜脚本前，必须进行系统性检查，确保分镜内容逻辑合理、流畅连贯。**

#### 4.1 分镜内部逻辑检查（每个分镜必须通过）

| 检查项 | 检查内容 | 通过标准 |
|--------|----------|----------|
| **内容完整性** | 画面描述是否完整 | 包含主体、动作、环境三要素 |
| **时长合理性** | 是否遵守15秒规则 | 不超过用户设定的时长上限 |
| **动作可行性** | 描述的动作能否在时长内完成 | 动作复杂度与时长匹配 |
| **视觉可执行性** | 效果是否可实际制作 | 技术可实现，无不可能描述 |
| **内容安全性** | 是否符合安全规范 | 无暴力血腥，详见content-safety.md |

**检查失败示例与修正：**
```
❌ 问题分镜："主角在3秒内完成从城市一端跑到另一端"
✓ 修正：拆分为3个镜头，每个展示不同阶段的奔跑

❌ 问题分镜："特写镜头同时展示全景和微观细节"
✓ 修正：拆分为全景镜头 + 特写镜头

❌ 问题分镜：镜头A"人物躺下休息" → 镜头B"双手无力地下垂"
✓ 修正：躺卧姿势下手应描述为"双手自然放置在身侧"

❌ 问题分镜：镜头A"手拿咖啡杯" → 镜头B"双手插兜走开"
✓ 修正：增加过渡"放下咖啡杯"或保持道具连贯
```

#### 4.2 分镜间逻辑检查（段落层面）

**叙事连贯性检查：**
- 相邻分镜视觉过渡是否自然？
- 场景切换是否有明确动机？
- 时间线是否清晰（过去→现在→未来）？

**空间与物理逻辑检查：**
- 机位移动是否符合空间关系？
- 角色位置变化是否合理？
- 视角切换是否符合180度规则？
- 相邻镜头中，角色姿势/动作是否符合物理规律？
  - **现实题材**：严格检查（例：躺着的人手应描述为"自然放置在身侧"而非"下垂"）
  - **科幻/奇幻/超能力题材**：宽松检查，仅确保设定内一致
- 道具和环境状态是否连续？
  - 例：上一镜头拿杯子，下一镜头杯子应仍在手中或已放下

**情绪连贯性检查：**
- 情绪曲线是否平滑递进？
- 高潮点位置是否合理？
- 结尾情绪是否收束得当？

**信息递进检查：**
- 信息呈现是否由浅入深？
- 关键信息是否得到强调？
- 有无信息重复或遗漏？

#### 4.3 流畅度评估（技术层面）

**节奏检查清单：**
- [ ] 开场3秒内是否有吸引力？
- [ ] 相邻镜头时长变化是否有节奏感？
- [ ] 是否存在连续3个以上同类型运镜？
- [ ] 高潮段落节奏是否加快？

**视觉多样性检查：**
- [ ] 景别是否有变化（远/全/中/近/特）？
- [ ] 构图是否多样（对称/黄金分割/框架式等）？
- [ ] 色彩过渡是否自然？
- [ ] 光影变化是否符合时间逻辑？

**音画同步检查：**
- [ ] 音效是否与动作精确对齐？
- [ ] BGM情绪是否与画面匹配？
- [ ] 旁白节奏是否与镜头切换协调？

#### 4.4 检查流程

**第一步：分镜自查**（AI自我检查）
逐条检查每个分镜的5项内部逻辑，标记问题分镜。

**第二步：段落审查**（整体连贯性）
按段落检查分镜间逻辑，确保叙事、空间、情绪、信息四维度连贯。

**第三步：流畅度评分**
为整个分镜脚本打分（1-10分），低于7分需优化。

**第四步：问题汇总与修正**
```
问题汇总格式：
- 段落X，镜头Y：问题描述
- 建议修正：具体修改方案
- 优先级：高/中/低
```

**第五步：迭代优化**
修改问题分镜后，重新执行检查流程，直到全部通过。

---

### 阶段5：生成分镜脚本

基于确定的段落结构和镜头拆分结果，生成完整的分镜脚本。

#### 确定输出版式

根据用户选择，生成分镜脚本：

**极简版输出**：
- 每个镜头仅包含画面内容描述和时间
- 旁白内容（或台词内容）
- 简洁易读，快速规划
- **镜头内容使用text代码块格式**，方便复制

**专业版输出**：
- 详细的运镜描述
- 画面布局规范
- 视觉元素说明
- 过渡效果
- 时间区间
- 旁白内容（或台词内容）
- **镜头内容使用text代码块格式**，方便复制

#### 总体规格
- 视频标题和版本信息
- 总时长（秒数 + 帧数）
- 背景风格描述
- 视觉风格定义
- 旁白风格说明
- 主角/吉祥物设定

#### 角色提示词生成（故事/剧情/电影类）

如果视频类型是剧情类、故事类、电影类，为每个主要角色生成AI绘画提示词：

**内容安全要求**：
- 角色提示词中禁止包含暴力、血腥、恐怖或令人不适的描述
- 禁止使用描述临时状态的词语（如"微笑""哭泣""愤怒""奔跑"等）
- 使用描述性外貌特征替代状态词（如"嘴角自然弧度"替代"微笑"）
- 如需表现动作，使用姿势描述（如"单脚离地，身体前倾"替代"奔跑"）
- 涉及冲突或紧张场景时，使用抽象视觉元素替代直接描述（详见 `references/content-safety.md`）

**角色提示词包含：**
- 主体描述（外貌、衣着、年龄、性别）
- 面部特征（轮廓、五官形状，避免状态词如"微笑""严肃"）
- 风格描述（艺术风格、渲染风格、光线）
- 数量和权重标签
- 比例参数（默认9:16，可自定义）
- 修饰符标签
- 示例：
  ```
  主角1: 年轻女性，短发，白色衬衫，面部轮廓清晰，电影风格，电影光效，8k，高质量 --ar 9:16
  主角2: 中年男性，西装，面部线条分明，写实风格，电影光效，4k，细节丰富 --ar 9:16
  ```

**重要**：角色提示词中禁止使用描述临时状态的词语（如"微笑""惊讶""奔跑"），应使用描述外貌特征和姿势的词语。

详见 `references/character-prompts.md`。

#### 音效/BGM建议

如果用户需要音效/BGM建议，为每个镜头或段落提供：

**音效：**
- 环境音（雨声、风声、城市噪音等）
- 转场音效（ swoosh、glitch、fade等）
- 强调音效（点击、弹跳、whoosh等）

**BGM：**
- 音乐类型（电子、古典、流行、氛围等）
- 节奏和情绪（紧张、轻松、激昂、温馨）
- 音量建议（铺垫、高潮、结尾）

详见 `references/audio-bgm.md`。

#### 分镜段落
每个段落包含：
1. **段落目标** - 该段落要传达什么信息
2. **时间区间** - 开始和结束时间（秒）
3. **镜头序列** - 段落内的多个镜头（每个不超过用户设定的上限）
   - 每个镜头包含：运镜、布局、视觉、过渡、音效/BGM、旁白/台词
   - **旁白和台词必须放在每个镜头后面**，方便对应查看
4. **音效/BGM**（如启用）- 配套音效和BGM建议

**极简版镜头内容（必须使用text代码块格式）：**
```
画面描述：简洁说明镜头要展示什么
时间：镜头时长
旁白/台词：对应该镜头的解说词或角色台词（如果没有则标注"无"）
```

**专业版镜头内容（必须使用text代码块格式）：**

```
运镜描述：速度、方向、缓动函数
画面布局：电影级构图方式（三分法/黄金分割/对称/框架式）、景别（远景/全景/中景/近景/特写）、视觉重心位置
视觉元素：具体元素描述
过渡方式：镜头间过渡效果
时间：镜头时长
音效（如启用）：具体音效类型
BGM（如启用）：音乐类型和音量
旁白/台词：对应该镜头的解说词或角色台词（如果没有则标注"无"）
```

旁白和台词一致性：
- 如果分镜中包含角色台词和旁白，确保两者内容一致，避免冲突
- 旁白用于解说和引导，台词用于角色对话，两者应相辅相成
- 在文本中明确标注旁白和台词的来源
- 每个镜头必须有对应的旁白/台词，如果没有则标注"无"
- 旁白/台词必须放在镜头的text代码中

#### OpenCode 执行提示词（可选）

如果用户选择生成，创建可在 OpenCode 中直接使用的提示词，用于执行视频制作（仅专业版生成）。

#### Seedance 2.0 提示词（可选）

如果用户选择生成Seedance 2.0提示词，为每个镜头生成符合AI视频生成格式的提示词：

**提示词结构（每镜头一个，必须使用text代码块格式）：**

```text
[主体描述]：详细描述主要角色/物体外观、服装、年龄、体型、表情等。

[场景与氛围]：描述环境、光线、天气、色调、整体风格（电影级、写实、赛博朋克等）。

[动作与情节]：按时间顺序描述该镜头的完整动作流程，在需要说话的时刻标注"（角色说：XXX）"或"（旁白响起）"。动作要具体、可视化。

[台词与旁白]：精确写出该镜头的台词/旁白文字内容、说话角色、语气、语速、情感。

[镜头语言]：明确镜头运动和剪辑方式（从低机位缓慢推近、360度环绕拍摄、快速切镜、长镜头跟随等）。

[音画同步/音频]：描述音效、BGM、以及台词/旁白与画面的同步要求（台词在角色张嘴时精确对齐唇动、旁白在镜头推近时渐强等）。

[其他控制]：时长（建议15秒以内）、分辨率（1080p或更高）、质量要求（高度逼真，细节丰富，无畸变）。
```

**注意事项：**
- 每个镜头生成独立的Seedance提示词
- 提示词要包含该镜头的完整信息，能独立生成视频片段
- 确保相邻镜头的提示词在内容和时间上连贯
- 参考 `docs/Seedance2.0提示词模板.md` 中的示例格式

---

### 阶段6：文件保存

在生成分镜文档前，确认文件保存位置。

**默认位置：** 用户当前项目的 `/docs` 文件夹

---
### 阶段7：更新用户画像

分镜生成完成后，更新用户画像文件。记录本次交互中用户的选择偏好，详见 `references/user-profile.md`。

## 运镜类型参考

### 文档层级说明

我们提供两个层级的运镜参考文档，根据您的需求选择：

| 文档 | 级别 | 适用场景 | 内容特点 |
|------|------|----------|----------|
| [`camera-movements.md`](references/camera-movements.md) | 基础 | 快速查阅、入门学习 | 6种核心运镜，简洁易懂 |
| [`cinematic-camera-movements.md`](references/cinematic-camera-movements.md) | 专业 | 电影级制作、深度需求 | 20+种运镜，含复杂组合、情绪对照 |

### 基础运镜速查

常用运镜类型，详见 `references/camera-movements.md`：

- **推近 (Dolly In)** - 强调主体，适合开场和重点
- **拉远 (Dolly Out)** - 展示全景，适合过渡和总结
- **环绕 (Orbiting)** - 360度展示，适合3D结构
- **跟拍 (Tracking)** - 跟随运动，适合流程展示
- **摇移 (Pan)** - 水平移动，适合宽画面展示
- **特写 (Close-up)** - 强调细节，适合数据展示

### 电影级别运镜（推荐用于专业制作）

专业电影运镜技术，详见 `references/cinematic-camera-movements.md`：

**基础运镜扩展：**
- **缓推/急推/变焦推** - 不同速度的推镜效果
- **揭示拉镜** - 从特写拉出展现全貌
- **甩镜** - 快速摇镜转场
- **斯坦尼康运镜** - 稳定流畅的运动感
- **手持运镜** - 真实感和紧张感

**复杂运镜组合：**
- **推+摇组合** - 推近同时转向
- **拉+升组合** - 后拉同时上升
- **环绕+升降组合** - 螺旋上升/下降
- **眩晕变焦** - 推轨同时变焦拉
- **长镜头** - 单一镜头持续叙事

**运镜情绪对照：**
- 缓推 = 沉思、紧张
- 急推 = 震惊、冲击
- 环绕 = 强调、360度展示
- 上升 = 超脱、渺小
- 手持 = 真实、紧张

## 画面布局参考

> 📐 专业构图布局技术详见 [`references/cinematic-layouts.md`](references/cinematic-layouts.md)

电影级别构图与布局技术：

**构图法则：**
- **三分法** - 3×3网格，元素放在交叉点
- **黄金分割** - 1:1.618比例，更自然和谐
- **对称构图** - 平衡、庄重、仪式感
- **框架式构图** - 画中画效果

**景别系统：**
- **远景 (ELS)** - 环境>人物，开场establishing
- **全景 (LS)** - 人物全身，展示造型
- **中景 (MS)** - 膝盖以上，对话场景
- **近景 (MCU)** - 胸部以上，情绪交流
- **特写 (CU)** - 肩部以上，强调细节
- **大特写 (ECU)** - 极细节，强烈冲击

**布局方案：**
- **视觉重心布局** - 根据重要性分配空间
- **引导线布局** - 利用线条引导视线
- **层次布局** - 前景、中景、背景构建3D感
- **动态平衡布局** - 不对称元素达到平衡

## 参考资产

### 🚀 快速入门
> **推荐新手先查阅**: [`references/quick-reference.md`](references/quick-reference.md) - 一页纸速查表，涵盖所有常用参数和规则

### 模板与配置
- `assets/storyboard-template.md` - 分镜模板文件（含变量说明和头脑风暴清单）
- `config/user-profile-template.md` - 用户画像模板

### 核心参考文档
- `references/video-types.md` - 7类视频类型对照表
- `references/questions-by-type.md` - 按视频类型的提问清单
- `references/visual-styles.md` - 视觉风格参考
- `references/shot-duration.md` - 镜头时长和拆分规则
- `references/story-patterns.md` - 12种叙事模式
- `references/output-templates.md` - 输出格式模板（含极简版和专业版）
- `references/content-safety.md` - 内容安全规范（暴力血腥替换方案）

### 运镜与布局参考
- `references/camera-movements.md` - 基础运镜类型参考
- `references/cinematic-camera-movements.md` - **电影级别运镜参考**（含复杂运镜组合）
- `references/cinematic-layouts.md` - **电影级别画面布局参考**（含构图法则、景别系统）

### 角色与音频
- `references/character-prompts.md` - 角色提示词生成指南（含无状态词规范）
- `references/audio-bgm.md` - 音效和BGM建议指南

### 用户系统
- `references/user-profile.md` - 用户画像机制

### 外部提示词模板
- `docs/Seedance2.0提示词模板.md` - Seedance 2.0 AI视频生成工具提示词模板

## 最佳实践

### 头脑风暴阶段
- 提供选择而非开放式问题
- 根据主题特点给出建议
- 优先推荐用户画像中记录的偏好

### 段落设计阶段
- 开场前3秒必须抓住注意力
- 每个段落时长控制在8-30秒
- 保持段落间的视觉和叙事连贯性

### 镜头拆分阶段
- **严格遵守用户设定的时长上限**
- 拆分后相邻镜头要有运镜变化
- 避免连续相同类型的运镜

### 画面顺序设计
- **开场段落**（2-3个镜头）：快速切入 → 主体展示 → 细节特写
- **核心段落**（2-4个镜头）：环绕展示 → 跟随流程 → 特写强调
- **结尾段落**（2个镜头）：汇聚元素 → 拉远全景
- **单个镜头时长**：3-15秒（不得超过用户设定的上限）

### 脚本生成阶段
- 运镜描述要具体（速度、方向、缓动函数）
- **画面布局使用电影级别构图**（详见 `references/cinematic-layouts.md`）
  - 优先使用三分法、黄金分割等经典构图
  - 景别选择符合叙事需要（远/全/中/近/特/大特写）
  - 运用视觉重心、引导线、层次布局增强画面质感
- **运镜方式参考电影级别运镜**（详见 `references/cinematic-camera-movements.md`）
  - 根据情绪选择合适的运镜类型（缓推=沉思，急推=冲击）
  - 使用复杂运镜组合增加视觉冲击力（推+摇、拉+升等）
  - 避免连续使用相同运镜，保持视觉多样性
- 旁白与视觉同步
- 如有台词，确保旁白和台词内容一致
- 在输出中明确标注旁白和台词的来源
- **每个镜头必须包含对应的旁白/台词**，放在该镜头的最后
- 如果某个镜头没有旁白/台词，标注"无"
- 每个镜头的旁白/台词应该与该镜头的画面内容对应
- **每个镜头内容必须使用text代码块格式**，方便用户复制到其他应用
- 技术提示词包含所有视觉规范
- **内容安全检查**：确保没有暴力、血腥或不适描述，使用抽象化表达和视觉隐喻替代

## 输出格式

生成的分镜脚本包含：
1. **结构化的分镜文档 (.md)** - 便于人类阅读和参考
   - **每个镜头内容必须使用text代码块格式**（包括极简版和专业版）
   - text格式示例：\`\`\`画面描述...时间...旁白...\`\`\`
   - 方便用户直接复制镜头内容到其他应用
   - 旁白和台词明确标注，确保一致性
   - 每个镜头后面紧跟该镜头的旁白/台词，方便对应
2. **OpenCode 执行提示词（可选）** - 可直接用于执行视频制作
3. **保存位置确认** - 确保文档妥善保存

详见 `references/output-templates.md`。
