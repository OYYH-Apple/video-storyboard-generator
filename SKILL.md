---
name: video-storyboard-generator
description: 通用视频分镜脚本生成器，支持头脑风暴需求澄清和用户画像记忆。用于创建带有详细运镜指导、画面设计和旁白的时间轴分镜文档。适用场景：(1)教学/讲解视频、概念演示 (2)书籍介绍、章节导读 (3)热点事件评论、观点表达 (4)剧情分镜、故事叙述 (5)产品介绍、功能演示 (6)数据分析、报告展示。当用户需要制作任何类型的视频分镜脚本时使用此skill。
---

# Video Storyboard Generator

通过头脑风暴与用户共同确定视频需求，基于用户画像提供个性化建议，生成结构化的视频分镜脚本。

## 核心原则

**段落是主题驱动的，不是标准化的**：分镜的段落结构完全取决于视频主题和内容需求。不存在"标准5段式"，每个视频的段落规划都应根据主题特点定制。

**需求需要共同探索**：用户可能对视频的具体表现形式不够清晰，需要通过头脑风暴一起确定时长、风格、主角、运镜风格等关键要素。

**用户画像驱动个性化**：系统会记忆用户的偏好（风格、节奏、主角类型等），在后续交互中提供更贴合用户喜好的建议。

**15秒黄金法则**：单个分镜镜头时长不应超过15秒。超过15秒的镜头必须拆分为多个子镜头，确保视觉节奏紧凑、观众注意力不流失。

## 工作流程

### 阶段0：加载用户画像

**在开始任何交互前，先检查用户画像文件：**

用户画像存储位置：`~/.video-storyboard/user-profile.md`

如果画像文件存在，读取并应用用户的偏好设置，在后续对话中优先推荐用户喜欢的选项。

如果画像文件不存在，使用默认设置，并在本次交互结束后保存用户的选择偏好。

**用户画像包含：**
- 偏好的视觉风格
- 偏好的主角/吉祥物类型
- 偏好的旁白风格
- 偏好的运镜节奏
- 历史生成的视频类型统计
- 用户自定义的其他偏好

参考 `references/user-profile.md` 了解用户画像的完整结构和用法。

---

### 阶段1：视频类型识别与头脑风暴

#### 1.1 识别视频类型

根据用户描述，首先识别视频类型：

| 类型 | 触发关键词 | 典型场景 |
|------|-----------|----------|
| **概念讲解** | 原理、机制、算法、技术、概念 | AI原理、区块链机制、物理定律 |
| **书籍介绍** | 书、书籍、读物、推荐、导读 | 书籍推荐、章节导读、读书笔记 |
| **热点评论** | 事件、新闻、热点、评论、观点 | 新闻解读、事件分析、观点表达 |
| **剧情分镜** | 故事、剧情、短片、动画、剧本 | 短片分镜、动画脚本、故事板 |
| **产品介绍** | 产品、功能、工具、应用 | 产品发布、功能演示、App介绍 |
| **数据报告** | 数据、报告、分析、趋势 | 数据可视化、研究报告、趋势分析 |
| **教程指南** | 教程、指南、步骤、操作 | 操作指南、软件教程、流程说明 |

#### 1.2 头脑风暴 - 需求澄清

根据视频类型，进行针对性的头脑风暴：

**通用必问项：**
1. **主题内容** - 核心内容是什么？
2. **目标受众** - 给谁看？（初学者/专业人士/普通大众/特定群体）
3. **核心信息** - 观众看完后应该记住什么？
4. **视频时长** - 预期时长（30秒/1分钟/3分钟/5分钟/更长）

**按类型的特定问题：**

**概念讲解类：**
- 这个概念有复杂的内部结构吗？
- 需要类比帮助理解吗？
- 目标是科普还是深度解析？

**书籍介绍类：**
- 是整书概览还是单章节导读？
- 需要突出哪些核心观点？
- 目标读者是谁？
- 书籍类型（技术/文学/商业/其他）？

**热点评论类：**
- 评论角度（支持/反对/中立分析）？
- 需要展示数据/证据吗？
- 情感基调（严肃/轻松/批判）？

**剧情分镜类：**
- 故事类型（悬疑/喜剧/爱情/动作）？
- 主要角色有哪些？
- 关键场景/转折点？
- 目标平台（抖音/B站/YouTube/院线）？

**产品介绍类：**
- 是新产品发布还是功能更新？
- 核心卖点是什么？
- 需要演示操作流程吗？

**数据报告类：**
- 数据来源和可信度？
- 需要展示的关键指标？
- 数据可视化偏好（图表/动画/信息图）？

**教程指南类：**
- 用户技能水平？
- 需要分步演示吗？
- 常见问题/陷阱需要提醒吗？

#### 1.3 视觉风格选择

根据视频类型和用户画像推荐风格：

- **科技感**：深蓝+粒子+神经网络（适合概念讲解、数据报告）
- **活泼轻松**：明亮色彩+卡通元素（适合教程、产品介绍）
- **严肃专业**：简洁+数据可视化（适合热点评论、报告）
- **文艺温暖**：柔和色调+情感元素（适合书籍介绍、剧情）
- **紧张悬疑**：暗色调+动态阴影（适合剧情分镜）
- **用户自定义**：根据用户描述定制

**优先推荐用户画像中记录的偏好风格。**

### 阶段2：段落结构设计

根据视频类型和头脑风暴结果，设计段落结构。

参考 `references/story-patterns.md` 获取各类视频的叙事模式。

**常见段落类型（根据主题选择）：**
- 开场引入（Hook）
- 问题/痛点陈述
- 核心概念解释
- 原理/机制展示
- 数据/案例展示
- 对比分析
- 实操演示
- 架构/流程展示
- 优势总结
- 应用场景
- 结尾号召（CTA）
- **书籍特有**：章节概览、核心观点、精彩摘录、阅读建议
- **热点特有**：事件回顾、多方观点、深度分析、行动呼吁
- **剧情特有**：场景设定、冲突铺垫、高潮转折、结局收尾

**设计原则：**
- 段落数量根据时长和内容复杂度决定（通常3-10个段落）
- 每个段落服务于一个清晰的叙事目标
- 段落间有逻辑递进关系

---

### 阶段3：镜头拆分（15秒黄金法则）

**核心规则：单个镜头时长不得超过15秒**

超过15秒的镜头必须拆分为多个子镜头，确保：
- 视觉节奏紧凑，保持观众注意力
- 每个镜头聚焦单一视觉焦点
- 镜头间有明确的运镜变化

#### 拆分策略

**时间拆分原则：**
```
原镜头时长        拆分建议
15秒以内         保持单个镜头
16-30秒          拆分为2个镜头（约8-15秒/个）
31-45秒          拆分为3个镜头（约10-15秒/个）
45秒以上         拆分为N个镜头（每个≤15秒）
```

**运镜变化策略：**
拆分后的相邻镜头必须有明显的运镜变化，避免视觉重复：

| 前一个镜头 | 推荐后一个镜头 |
|-----------|---------------|
| 推近 (Dolly In) | 环绕/特写/拉远 |
| 环绕 (Orbiting) | 推近/跟拍/摇移 |
| 跟拍 (Tracking) | 推近/特写/定格 |
| 拉远 (Dolly Out) | 推近/汇聚 |
| 特写 (Close-up) | 拉远/环绕/摇移 |

**拆分示例：**
```
原镜头：展示产品功能流程（20秒）
↓ 拆分为 ↓
镜头1：推近展示产品主界面（0-8秒）
镜头2：跟拍功能操作流程（8-16秒）
镜头3：特写关键结果展示（16-20秒）
```

#### 镜头时长建议

| 视频类型 | 建议单镜头时长 | 说明 |
|---------|---------------|------|
| 快节奏短视频 | 3-8秒 | 抖音/快手风格 |
| 教学讲解 | 8-12秒 | 保持清晰节奏 |
| 剧情分镜 | 5-15秒 | 根据情绪调整 |
| 数据展示 | 10-15秒 | 数据需要时间阅读 |
| 产品演示 | 8-12秒 | 突出关键功能 |

---

### 阶段4：生成分镜脚本

基于确定的段落结构和镜头拆分结果，生成完整的分镜脚本。

#### 总体规格
- 视频标题和版本信息
- 总时长（秒数 + 帧数）
- 背景风格描述
- 视觉风格定义
- 旁白风格说明
- 主角/吉祥物设定

#### 分镜段落
每个段落包含：
1. **段落目标** - 该段落要传达什么信息
2. **时间区间** - 开始和结束时间（秒）
3. **镜头序列** - 段落内的多个镜头（每个≤15秒）
   - 每个镜头包含：
     - 镜头编号（shot_id）
     - 时间范围（time_range）
     - 镜头类型（shot_type）
     - 运镜描述（camera）
     - 画面布局（layout）
     - 视觉元素（visual）
     - 过渡方式（transition）
4. **旁白内容** - 具体的解说词

#### OpenCode执行提示词
自动生成可在OpenCode中直接使用的提示词，用于执行视频制作：

**提示词格式：**
```
remotion，创建一个严格{X}秒（durationInFrames: {Y}）的{风格}视频，总时长控制在{Z}分钟以内。

必须优化：
- 画面紧凑：元素满屏分布，多用grid/flex多列布局，文字/图标放大填充80-90%屏幕，减少任何留白。
- 动画流畅自然：所有过渡用spring()高系数弹簧 + interpolate多关键帧 + easeInOut + stagger子元素延迟，避免任何生硬线性或突然出现。
- 运镜专业动态：严格按分镜运镜描述实现（{运镜列表}），节奏{节奏描述}。

背景{背景描述}，主色{主色}，代码高亮专业，{视觉风格描述}，{背景音乐}，{旁白描述}，自动生成旁白同步字幕。

严格按以下分镜实现，分镜细节：[完整的分镜脚本内容，去除换行符压缩为长文本]
```

### 阶段5：文件保存

**确认保存位置：**
在生成分镜文档前，必须确认文件保存位置。

**默认位置：** 用户当前项目的 `/docs` 文件夹

- 如果 `/docs` 文件夹不存在，询问是否创建
- 提供其他可选位置供用户选择

**文件名格式：** `{标题}_storyboard.md`

**示例对话：**
- "分镜脚本将保存在您项目的/docs文件夹中，文件名为'{标题}_storyboard.md'，确认吗？"
- "您希望将分镜文件保存在其他位置吗？"

---

### 阶段6：更新用户画像

**分镜生成完成后，更新用户画像文件。**

记录本次交互中用户的选择偏好：
- 本次选择的视觉风格
- 本次选择的主角/吉祥物
- 本次选择的旁白风格
- 本次选择的运镜节奏
- 视频类型标签

**更新策略：**
- 新偏好追加到历史记录
- 统计各类偏好的使用频率
- 识别用户的稳定偏好（出现次数最多的选项）
- 保存到 `~/.video-storyboard/user-profile.md`

参考 `references/user-profile.md` 了解画像更新规则。

## 运镜类型参考

参考 `references/camera-movements.md` 获取完整运镜类型和技术参数。

常用运镜类型：
- **推近 (Dolly In)** - 强调主体，适合开场和重点
- **拉远 (Dolly Out)** - 展示全景，适合过渡和总结
- **环绕 (Orbiting)** - 360度展示，适合3D结构
- **跟拍 (Tracking)** - 跟随运动，适合流程展示
- **摇移 (Pan)** - 水平移动，适合宽画面展示
- **特写 (Close-up)** - 强调细节，适合数据展示

## 参考资产

- `assets/storyboard-template.md` - 分镜模板文件（变量化模板）
- `references/camera-movements.md` - 运镜类型参考手册
- `references/story-patterns.md` - 常见叙事模式参考（含各类视频模板）
- `references/user-profile.md` - 用户画像结构与更新规则

## 最佳实践

### 头脑风暴阶段
- 不要假设用户知道他们想要什么
- 提供选择而非开放式问题（"A风格还是B风格？"比"你喜欢什么风格？"更好）
- 根据主题特点给出建议（技术主题推荐科技感，书籍推荐文艺风格）
- **优先推荐用户画像中记录的偏好**

### 段落设计阶段
- 开场前3秒必须抓住注意力
- 每个段落时长控制在8-30秒
- 复杂概念拆分成多个短段落
- 保持段落间的视觉和叙事连贯性

### 镜头拆分阶段（关键！）
- **严格遵守15秒上限**
- 超时镜头必须拆分
- 拆分后相邻镜头要有运镜变化
- 避免连续相同类型的运镜

### 画面顺序设计
- **开场段落**（建议2-3个镜头）：快速切入 → 主体展示 → 细节特写
- **核心段落**（建议2-4个镜头）：环绕展示 → 跟随流程 → 特写强调
- **结尾段落**（建议2个镜头）：汇聚元素 → 拉远全景
- **单个镜头时长**：3-15秒（不得超过15秒），过渡0.5-1秒

### 脚本生成阶段
- 运镜描述要具体（速度、方向、缓动函数）
- 画面布局强调紧凑（80-90%占屏）
- 旁白与视觉同步，避免"看字听音"
- 技术提示词包含所有视觉规范

### 用户画像更新
- 每次交互结束后更新画像
- 记录用户选择，不记录用户隐私
- 画像用于改进后续推荐，不用于其他目的

## 输出格式

### 1. 分镜文档 (.md)

生成的分镜脚本包含以下章节：

```
# [主题] 讲解视频分镜脚本

## 视频总体规格
- 时长：X秒（Y帧）
- 背景：[背景风格]
- 风格：[视觉风格]
- 主角：[主角描述]
- 旁白：[旁白风格]

## 分镜段落设计
### 段落1：开场引入（0-12秒）

**段落目标**：建立兴趣，介绍主题背景

**画面顺序**：
#### 镜头1：推近 (Dolly In)（0-3秒）
- **运镜**：从全黑快速 spring dolly in，主角从底部升起
- **布局**：主角占屏40%，标题满幅覆盖
- **视觉**：标题文字从四角stagger飞入汇聚
- **过渡**：无缝过渡

#### 镜头2：环绕 (Orbiting)（3-12秒）
- **运镜**：360°环绕展示主角
- **布局**：主角居中，周围环绕关键信息气泡
- **视觉**：主角表情变化，背景粒子动态流动
- **过渡**：平滑过渡

**旁白**："大家好！今天介绍..."

## 技术实现提示词
[技术规范]

## OpenCode执行提示词（直接复制使用）
[可直接在OpenCode中使用的提示词]

## 文件保存位置
建议保存位置：./docs/[标题]_storyboard.md
```

### 2. OpenCode提示词格式

生成的OpenCode提示词为单行长文本格式，可直接复制到OpenCode中执行：

```
remotion，创建一个严格{X}秒（durationInFrames: {Y}）的{风格}视频...

必须优化：
- 画面紧凑：...
- 动画流畅自然：...
- 运镜专业动态：...

背景{背景}...自动生成旁白同步字幕。

严格按以下分镜实现，分镜细节：段落1（时间）目标-...镜头序列-镜头1(0-3秒)-推近(Dolly In),镜头2(3-12秒)-环绕(Orbiting)；旁白-... | 段落2（时间）目标-...镜头序列-镜头1(12-16秒)-推近(Dolly In),镜头2(16-24秒)-环绕(Orbiting)；旁白-... | ...
```

**提示词特点：**
- 分镜细节被压缩为单行长文本（去除换行符，用" | "分隔各段落）
- 每个段落包含：目标、镜头序列（多个镜头）、旁白
- 镜头序列描述每个镜头的时间范围和类型
- 可直接复制粘贴到OpenCode聊天框中使用

### 3. 文件保存

**必须确认保存位置**

默认保存位置：`./docs/[标题]_storyboard.md`

**对话示例：**
```
✅ 分镜脚本已生成完毕！

📄 建议保存位置：./docs/microGPT_storyboard.md
   
❓ 是否确认保存到该位置？
   - 输入 "确认" 使用默认位置
   - 输入其他路径自定义保存位置
   - 例如：./docs/video/microGPT.md
```

**注意事项：**
- 如果 `/docs` 文件夹不存在，询问是否自动创建
- 文件名自动处理特殊字符（替换为下划线）
- 建议用户保留生成的 .md 文件作为参考文档

## 完整输出示例

头脑风暴或 CLI 完成后，生成的内容包含：

1. **结构化的分镜文档** - 便于人类阅读和参考
2. **OpenCode执行提示词** - 可直接用于执行视频制作
3. **保存位置确认** - 确保文档妥善保存
