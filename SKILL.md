---
name: video-storyboard-generator
description: 视频分镜脚本生成器，支持头脑风暴、用户偏好记忆、15秒镜头规则、角色提示词生成、音效/BGM建议。用于生成带运镜指导、画面设计、旁白、角色描述的完整分镜脚本。支持极简版（内容描述）和专业版（详细运镜）。适用：教程、书籍介绍、评论、剧情、产品介绍、数据报告。当用户说"做分镜"、"分镜脚本"、"视频分镜"时使用。
---

# Video Storyboard Generator

通过头脑风暴与用户共同确定视频需求，基于用户画像提供个性化建议，生成结构化的视频分镜脚本。

## 核心原则

**段落是主题驱动的，不是标准化的**：分镜的段落结构完全取决于视频主题和内容需求。

**需求需要共同探索**：用户可能对视频的具体表现形式不够清晰，需要通过头脑风暴一起确定。

**用户画像驱动个性化**：系统会记忆用户的偏好，在后续交互中提供更贴合用户喜好的建议。

**15秒黄金法则**：单个分镜镜头时长不得超过15秒。

## 工作流程

### 阶段0：加载用户画像

在开始任何交互前，检查 `~/.video-storyboard/user-profile.md`。

如果画像文件存在，读取并应用用户的偏好设置。如果不存在，使用默认设置，并在本次交互结束后保存用户的选择偏好。

详见 `references/user-profile.md`。

---

### 阶段1：视频类型识别与头脑风暴

#### 识别视频类型

根据用户描述识别视频类型，详见 `references/video-types.md`。

#### 头脑风暴 - 需求澄清

根据视频类型进行针对性的头脑风暴，详见 `references/questions-by-type.md`。

**所有视频类型都需要确认：**
5. **分镜版式** - 需要极简版（仅内容描述）还是专业版（详细运镜指导）？
   - **极简版**：仅列出每个分镜的画面内容和旁白
   - **专业版**：包含运镜、布局、视觉元素、过渡等详细信息

6. **音效/BGM** - 需要音效和BGM建议吗？
   - 音效：环境音、转场音效、强调音效
   - BGM：背景音乐类型和节奏

**故事类、剧情类、电影类视频额外确认：**
7. **角色设定** - 主要角色有哪些？
   - 角色数量和定位
   - 角色外貌特征
   - 角色性格特点
   - 是否需要角色提示词（用于AI生成角色形象）

详见 `references/character-prompts.md`。

8. **场景设定** - 主要场景有哪些？
   - 室内/室外
   - 时间（白天/黑夜/傍晚）
   - 氛围/情绪

#### 视觉风格选择

根据视频类型和用户画像推荐风格，详见 `references/visual-styles.md`。优先推荐用户画像中记录的偏好风格。

---

### 阶段2：段落结构设计

根据视频类型和头脑风暴结果，设计段落结构。详见 `references/story-patterns.md`。

**设计原则：**
- 段落数量根据时长和内容复杂度决定（通常3-10个段落）
- 每个段落服务于一个清晰的叙事目标
- 段落间有逻辑递进关系

---

### 阶段3：镜头拆分（15秒黄金法则）

**核心规则：单个镜头时长不得超过15秒**

超过15秒的镜头必须拆分为多个子镜头，确保视觉节奏紧凑、镜头间有明确的运镜变化。

拆分策略详见 `references/shot-duration.md`。

---

### 阶段4：生成分镜脚本

基于确定的段落结构和镜头拆分结果，生成完整的分镜脚本。

#### 确定输出版式

根据用户选择，生成分镜脚本：

**极简版输出**：
- 每个镜头仅包含画面内容描述和时间
- 旁白内容
- 简洁易读，快速规划

**专业版输出**：
- 详细的运镜描述
- 画面布局规范
- 视觉元素说明
- 过渡效果
- 时间区间
- 旁白内容

#### 总体规格
- 视频标题和版本信息
- 总时长（秒数 + 帧数）
- 背景风格描述
- 视觉风格定义
- 旁白风格说明
- 主角/吉祥物设定

#### 角色提示词生成（故事/剧情/电影类）

如果视频类型是剧情类、故事类、电影类，为每个主要角色生成AI绘画提示词：

**角色提示词包含：**
- 主体描述（外貌、衣着、年龄、性别）
- 风格描述（艺术风格、渲染风格、光线）
- 数量和权重标签
- 修饰符标签
- 示例：
  ```
  主角1: 年轻女性，短发，白色衬衫，电影风格，8k，高质量 --ar 16:9
  主角2: 中年男性，西装，严肃表情，写实风格，4k，细节丰富 --ar 16:9
  ```

详见 `references/character-prompts.md`。

#### 音效/BGM建议

如果用户需要音效/BGM建议，为每个镜头或段落提供：

**音效：**
- 环境音（雨声、风声、城市噪音等）
- 转场音效（ swoosh、glitch、fade等）
- 强调音效（点击、弹跳、whoosh等）

**BGM：**
- 音乐类型（电子、古典、流行、氛围等）
- 节奏和情绪（紧张、轻松、激昂、温馨）
- 音量建议（铺垫、高潮、结尾）

详见 `references/audio-bgm.md`。

#### 分镜段落
每个段落包含：
1. **段落目标** - 该段落要传达什么信息
2. **时间区间** - 开始和结束时间（秒）
3. **镜头序列** - 段落内的多个镜头（每个≤15秒）
4. **音效/BGM**（如启用）- 配套音效和BGM建议
5. **旁白内容** - 具体的解说词

**极简版镜头内容：**
- 画面描述：简洁说明镜头要展示什么
- 时间：镜头时长

**专业版镜头内容：**
- 运镜描述：速度、方向、缓动函数
- 画面布局：元素位置、占比
- 视觉元素：具体元素描述
- 过渡方式：镜头间过渡效果
- 时间：镜头时长

#### OpenCode 执行提示词

自动生成可在 OpenCode 中直接使用的提示词，用于执行视频制作（仅专业版生成）。

---

### 阶段5：文件保存

在生成分镜文档前，确认文件保存位置。

**默认位置：** 用户当前项目的 `/docs` 文件夹

---
### 阶段6：更新用户画像

分镜生成完成后，更新用户画像文件。记录本次交互中用户的选择偏好，详见 `references/user-profile.md`。

## 运镜类型参考

常用运镜类型，详见 `references/camera-movements.md`。

- **推近 (Dolly In)** - 强调主体，适合开场和重点
- **拉远 (Dolly Out)** - 展示全景，适合过渡和总结
- **环绕 (Orbiting)** - 360度展示，适合3D结构
- **跟拍 (Tracking)** - 跟随运动，适合流程展示
- **摇移 (Pan)** - 水平移动，适合宽画面展示
- **特写 (Close-up)** - 强调细节，适合数据展示

## 参考资产

- `assets/storyboard-template.md` - 分镜模板文件
- `references/video-types.md` - 7类视频类型对照表
- `references/questions-by-type.md` - 按视频类型的提问清单
- `references/visual-styles.md` - 视觉风格参考
- `references/shot-duration.md` - 镜头时长和拆分规则
- `references/camera-movements.md` - 运镜类型参考
- `references/story-patterns.md` - 12种叙事模式
- `references/character-prompts.md` - 角色提示词生成指南
- `references/audio-bgm.md` - 音效和BGM建议指南
- `references/user-profile.md` - 用户画像机制
- `references/output-templates.md` - 输出格式模板（含极简版和专业版）

## 最佳实践

### 头脑风暴阶段
- 提供选择而非开放式问题
- 根据主题特点给出建议
- 优先推荐用户画像中记录的偏好

### 段落设计阶段
- 开场前3秒必须抓住注意力
- 每个段落时长控制在8-30秒
- 保持段落间的视觉和叙事连贯性

### 镜头拆分阶段
- **严格遵守15秒上限**
- 拆分后相邻镜头要有运镜变化
- 避免连续相同类型的运镜

### 画面顺序设计
- **开场段落**（2-3个镜头）：快速切入 → 主体展示 → 细节特写
- **核心段落**（2-4个镜头）：环绕展示 → 跟随流程 → 特写强调
- **结尾段落**（2个镜头）：汇聚元素 → 拉远全景
- **单个镜头时长**：3-15秒（不得超过15秒）

### 脚本生成阶段
- 运镜描述要具体（速度、方向、缓动函数）
- 画面布局强调紧凑（80-90%占屏）
- 旁白与视觉同步
- 技术提示词包含所有视觉规范

## 输出格式

生成的分镜脚本包含：
1. **结构化的分镜文档 (.md)** - 便于人类阅读和参考
2. **OpenCode 执行提示词** - 可直接用于执行视频制作
3. **保存位置确认** - 确保文档妥善保存

详见 `references/output-templates.md`。
